name: Tests

on: [pull_request, push]

jobs:
  linux_test:
    name: Tests - linux

    runs-on: ubuntu-latest

    steps:
      - name: Check out code into the Go module directory
        uses: actions/checkout@v1

      - name: Build the docker image
        run: docker build -t testenv -f linux_test.dockerfile .

      - name: Run the image
        run: docker run testenv

  windows_test:
    name: Tests - windows

    runs-on: windows-latest

    steps:
      - name: Check out code into the Go module directory
        uses: actions/checkout@v1

      - name: Build the docker image
        run: docker build -t testenv -f windows_test.dockerfile .

      - name: Run the image
        run: docker run testenv
